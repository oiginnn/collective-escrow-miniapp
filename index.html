<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Collective Escrow</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="background:#0f0f0f;color:white;font-family:sans-serif;padding:16px">
  <h3>Collective Escrow</h3>
  <div id="balance">Loadingâ€¦</div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    fetch("https://collective-escrow-backend.onrender.com/api/me", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ initData: tg.initData })
    })
    .then(r => r.json())
    .then(d => {
      document.getElementById("balance").innerText =
        "Balance: " + d.balance + " tokens";
    })
    .catch(() => {
      document.getElementById("balance").innerText = "Access denied";
    });
  </script>
</body>
</html>
